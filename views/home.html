<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forum</title>
    <link rel="stylesheet" href="static/home.css">
    <link rel="stylesheet" href="static/modal.css">
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header">
            <img src="static/images/lion-icon.png" alt="Logo" class="logo">
            <h1> Feeling your inner-r-rr-rrr lion?</h1>
            <p class="welcome-message">
                Welcome to Literary Lions Forum! Here you can embrace the power of online discussions, fostering deeper connections, enriching their reading journeys, and ensuring the book club roars with literary passion ;-))
            </p>
        </div>

        <!-- Search Form (Always visible) -->
        <form action="/search" method="GET">
            <input type="text" name="query" placeholder="Search posts..." required>
            <button type="submit">Search</button>
        </form>

        <!-- Authentication and User Section -->
        {{if not .IsLoggedIn}}
            <!-- If not logged in, show the auth template (e.g., login/register options) -->
            {{template "auth" .}}
        {{else}}
            <!-- If logged in, display the user's message and options -->
            {{if .LoginSuccessMessage}}
                <div class="success-message">
                    {{.LoginSuccessMessage}}
                </div>
            {{end}}

            <p>You are logged in! Feel free to comment, like, <a href="/posts/create">create a post</a>, or go to your <a href="/profile">profile</a>.</p>
            
            <br>
            <p class="message">
                You are logged in! Feel free to commentğŸ’¬, likeğŸ‘, or <a href="/posts/create">create a postğŸ“</a> or go to your <a href="/profile">profile</a>.
            </p>
            <form action="/logout" method="POST">
                <button type="submit">Log Out</button>
            </form>

            <!-- Create Post Section (Visible if user is logged in) -->
            {{template "create_post" }}
        {{end}}

        <!-- Categories Section -->
        <h2>Sort by CategoryğŸ“š</h2>
{{if .Categories}}
    <div class="category-section">
        <ul class="category-list">
            {{range .Categories}}
                <li class="category-item">
                    <a href="/posts?category_id={{.ID}}">{{.Name}}</a>
                </li>
            {{else}}
                <li>No categories available</li>
            {{end}}
        </ul>
    </div>
{{else}}
    <p>No categories found.</p>
{{end}}

        <!-- Published Posts Section -->
        <div class="posts-section">
            <h2>Published PostsğŸ“œ</h2>
            {{if .Posts}}
                {{range .Posts}}
                    <div class="post">
                        <h3 class="post-title">{{.Title}}</h3>
                        <p class="post-category">Category: {{.CategoryName}}</p>
                        <p class="post-content">{{.Body}}</p>
                    </div>
                {{end}}
            {{else}}
                <p>No posts found yet.</p>
            {{end}}
        </div>

        <!-- Footer Section -->
        <div class="footer">
            <p>&copy; 2024 Literary Lions Forum</p>
        </div>
    </div>
</body>
</html>
