{{define "auth"}}
<!-- Checkbox to trigger the modal -->
<input type="checkbox" id="modal-toggle" class="modal-toggle" {{if .ShowModal}}checked{{end}}>

<!-- Modal Trigger Button -->
<label for="modal-toggle" class="modal-open button-class" style="display: inline-block;">Login or Registerü¶Åüîë</label>

<!-- The Modal -->
<div class="modal">
    <label for="modal-toggle" class="modal-overlay"></label>
    <div class="modal-content">
        <label for="modal-toggle" class="modal-close">&times;</label>
        <h2>Welcome ü¶Å!</h2>
        <p>Select a tab to login or registerüîë</p>

        <!-- Tab Radio Buttons -->
        <input type="radio" id="login-tab" name="auth-tab" {{if not .IsRegistering}}checked{{end}} {{if .LoginError}}checked{{end}}>
        <input type="radio" id="register-tab" name="auth-tab" {{if .IsRegistering}}checked{{end}} {{if .RegistrationError}}checked{{end}}>

        <div class="tab-container">
            <label for="login-tab" class="tab">Login</label>
            <label for="register-tab" class="tab">Register</label>
        </div>

        <div class="tab-content">
            <!-- Login Form -->
            <div id="login-form" class="auth-form">
                <h3>Login</h3>
                {{if .LoginError}}
                <p style="color: red;">{{.LoginError}}</p>
                {{end}}
                <form action="/login" method="POST">
                    <input type="hidden" name="csrf_token" value="{{.CsrfToken}}">
                    <label>Email:</label>
                    <input type="email" name="email" required>
                    <label>Password:</label>
                    <input type="password" name="password" required>
                    <input type="submit" value="Login">
                </form>
            </div>

            <!-- Register Form -->
            <div id="register-form" class="auth-form">
                <h3>Register</h3>
                {{if .RegistrationError}}
                <p style="color: red;">{{.RegistrationError}}</p>
                {{end}}
                {{if .SuccessMessage}}
                <p style="color: green;">{{.SuccessMessage}}</p>
                {{end}}
                <form action="/register" method="POST">
                    <input type="hidden" name="csrf_token" value="{{.CsrfToken}}">
                    <label>Username:</label>
                    <input type="text" name="username" required>
                    <label>Email:</label>
                    <input type="email" name="email" required>
                    <label>Password:</label>
                    <input type="password" name="password" required>
                    <input type="submit" value="Register">
                </form>
            </div>
        </div>
    </div>
</div>
{{end}}
